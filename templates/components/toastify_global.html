<div id="success-messages">
    {% for msg in success %}
        <div class="toastify-success">{{ msg }}</div>
    {% endfor %}
</div>

<div id="error-messages">
    {% for msg in errors %}
        <div class="toastify-error">{{ msg }}</div>
    {% endfor %}
</div>


<script>

    document.addEventListener('htmx:afterSwap', function (event) {
        console.log('SE CAMBIO');
        const successMessages = event.target.querySelector('#success-messages');
        const errorMessages = event.target.querySelector('#error-messages');

        // Función para mostrar mensajes Toastify
        function showToastifyMessages(container, className) {
            const messages = container.querySelectorAll('.' + className);
            messages.forEach(function (message) {
                const text = message.textContent;
                Toastify({
                    text: text,
                    duration: 3000,
                    newWindow: true,
                    close: true,
                    gravity: "top",
                    position: "right",
                    stopOnFocus: true,
                    style: {
                        background: className === 'toastify-success' ? "linear-gradient(to right, #00b09b, #96c93d)" : "linear-gradient(to right, #ff0000, #ff5e5e)",
                    },
                    onClick: function () { }
                }).showToast();
            });
        }

        // Mostrar mensajes de éxito
        if (successMessages) {
            showToastifyMessages(successMessages, 'toastify-success');
        }

        // Mostrar mensajes de error
        if (errorMessages) {
            showToastifyMessages(errorMessages, 'toastify-error');
        }
    });

</script>