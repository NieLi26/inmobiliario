# arreglar redirecciones la crear propiedad y crear publicacion
# corregir al crear propiedad lo envia a propiedad
# cambiar etiqueta en uso a otro nombre (LISTO)
# al crear publicacion, mandar a publicacion
# escoja tipo de publicacion cambiar tipo operacion (LISTO)
# sidebar publicaciones a ver publicaciones (LISTO)
# cambiar el sidebar del mobile menu (LISTO)
# cambiar palabra activa en propiedad a disponible (LISTO)
# activa ---> disponible o disponibilidad (LISTO)
# en uso ---> publicacion (LISTO)

#### VALIDACIONES ####
# Evitar editar publicacion al estar eliminada(state=False) (LISTO)
# Evitar cambiar estado publicacion al estar eliminada(state=False) (LISTO) (ver como funciona para la interfaz que se interactua en propiedad)( LISTO)
# Evitar ver Publicacion al estar eliminada(state=False) (LISTO)
# Evitar ver Publicacion al estar despublicada(status='dr') (LISTO)
# Evitar crear publicacion, en una propiedad con publicacion activa (LISTO)
# Evitar cambiar estado propiedad si hay una publicacion vigente (state=True) (LISTO)

# restringir vistas a los no usuarios(LoginRequiredMixin) (LISTO)
# restringir vistas segun permiso usuario?
# Pensar si eliminar o no propiedades
# cambiar funciones globalchange, globaldelete, tableglobal por nombre publication (LISTO)
# mas adelante pasar como parametros no en los kwargs de la url (publicaciones y propiedades la tienen)
# incluir sidea_alert y mensaje en la vista "success" o "errors" en la views

# corregir que no se suben archivos
# cerrar modal al enviar operacion (Solucion recargar pagina)


#### OPERACION VENTA #######
# distinto formulario si tiene el campo has_promise
- si, mostrar para subir la fecha de compra/venta, y documento, y nose si valor
- no, solo mostrar el total, o no mostrar nada

#### OPERACION ARRIENDO #######
- preguntar como sacar la comision de arriendo, se pide el dato o se queda en base al precio de referencia, no el precio real
- restringir que solo se pueda cambiar el estado con ciertas condiciones 
* condicion 1 = total de mensualidad, debe existir
- restringir que al generar un pago se habilite el icono y se pueda realizar la accion solamente si el campo "is_completed" esta en True
- hacer el la vista de listado de pagos de arriendo
- quizas restringir solo un mes unico por pago al crear pago

#### CAMBIOS NUEVOS ######

====LISTO===
- Estado operación(LISTO)
Archivo 
Operativo
Archivado o activo(activado)

- Modelo cliente, para agregarlo en operación(LISTO)
- Campo direccion cliente, propietario en operacion[crm cliente](LISTO)
- crear modelo de cliente y pedirlo en las operaciones(LISTO)
- Campo fecha firma contrato por fecha de pago.(LISTO)
- para cambiar publicacion  y crear una operacion, usar el mismo modal de concretar, pero eso crea una operacion, ya no usar signal para eso(LISTO)
- hacer todo en publicacion, publicar y despublicar(LISTO)
- sacar el campo operation(LISTO)
- restringir 1 publication activa por propiedad(LISTO)
- restringir 1 operacion activa por publicacion(LISTO)
- Modal en propiedad con ver información extra(LISTO)
- activar operacion, solo si publicacion esta activa(LISTO)
- datos en alguna tabla operacion (Tipo, número rol, comuna, cliente)(LISTO)

====PENDIENTE===

- Fecha termino contrato es igual a la fecha actual no se puede pagar(LISTO)(PREGUNTAR)
- agregar filtros por estado de operacion 
- Gráficos y estadística para historial de pagos
- Botón datos de cliente en apartado de arriendo, para ver datos de cliente, y saber cómo comunicarme con el.
- al crear publicacion enviarme a listado de la publicacion, igual para operacion al crearla
- quizas arreglar que al no dejar crear publicacion y no tener permiso, me de una notificacion en vez de redireccionarme
- crear operaciones usando otra operacion que ya esta deshabilitada


// EXPORTAR UNA BASE DE DATOS
python manage.py dumpdata --indent 2 > database.json
python -Xutf8 manage.py dumpdata --indent 2 > database.json
python -Xutf8 manage.py dumpdata --indent 2 -o database.json

// IMPORTAR(RESTAURAR) UNA BASE DE DATOS
python manage.py loaddata database.json

// RESET INCREMENT SQLITE
sqlite3 nombre_base
delete from auth_permission;
delete from sqlite_sequence where name='auth_permission';
delete from django_content_type;
delete from sqlite_sequence where name='django_content_type';

// RESET INCREMENT POSTGRESQL
sudo -u postgres psql -d nombre_base
use nombre_base;
delete from public.auth_permission;
ALTER SEQUENCE public.auth_permission_id_seq RESTART WITH 1;
delete from public.django_content_type;
ALTER SEQUENCE public.django_content_type_id_seq RESTART WITH 1;

// RESET INCREMENT MYSQL
delete from auth_permission;
ALTER TABLE auth_permission AUTO_INCREMENT = 1;
delete from django_content_type;
ALTER TABLE django_content_type AUTO_INCREMENT = 1;
